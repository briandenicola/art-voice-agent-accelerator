# ═══════════════════════════════════════════════════════════════════════════════
# Fraud Agent - Unified Schema
# ═══════════════════════════════════════════════════════════════════════════════
# Post-authentication fraud detection specialist
# Works with both SpeechCascade and VoiceLive orchestrators
# ═══════════════════════════════════════════════════════════════════════════════

name: FraudAgent
description: |
  Human-centered fraud detection specialist. Prioritizes emotional connection
  and reassurance before problem-solving. Handles credit card fraud, identity theft,
  account takeover, and suspicious activity with empathy and care.

greeting: "Hi there, you've reached the Fraud Prevention team. I know dealing with fraud is stressful, but you're in the right place - I'm here to help. What's going on?"
return_greeting: "Hey, welcome back. I've got everything from before. Tell me what's changed and we'll keep working on this together."

# ─────────────────────────────────────────────────────────────────────────────
# Handoff Configuration
# ─────────────────────────────────────────────────────────────────────────────
handoff:
  trigger: handoff_fraud_agent      # Other agents call this to reach FraudAgent

# ─────────────────────────────────────────────────────────────────────────────
# Model Configuration (overrides _defaults.yaml)
# ─────────────────────────────────────────────────────────────────────────────
model:
  temperature: 0.6                   # Lower for consistent fraud investigation

# ─────────────────────────────────────────────────────────────────────────────
# Voice Configuration
# ─────────────────────────────────────────────────────────────────────────────
voice:
  name: en-US-OnyxTurboMultilingualNeural
  type: azure-standard
  rate: "0%"

# ─────────────────────────────────────────────────────────────────────────────
# Session Configuration (VoiceLive-specific)
# ─────────────────────────────────────────────────────────────────────────────
session:
  modalities: [TEXT, AUDIO]
  input_audio_format: PCM16
  output_audio_format: PCM16

  input_audio_transcription_settings:
    model: azure-speech
    language: en-US

  turn_detection:
    type: azure_semantic_vad
    threshold: 0.48
    prefix_padding_ms: 220
    silence_duration_ms: 650

  tool_choice: auto

# ─────────────────────────────────────────────────────────────────────────────
# Tools (referenced by name from shared registry)
# ─────────────────────────────────────────────────────────────────────────────
tools:
  # Core Fraud Detection
  - analyze_recent_transactions
  - check_suspicious_activity
  - block_card_emergency
  - create_fraud_case
  - create_transaction_dispute
  - ship_replacement_card
  - send_fraud_case_email
  - provide_fraud_education
  
  # Knowledge Base
  - search_knowledge_base
  
  # Handoffs (for tool-based strategy)
  - handoff_to_auth          # Return to AuthAgent (insurance) or Concierge (banking)
  - handoff_concierge        # Return to concierge (banking scenario)
  
  # Escalation
  - transfer_call_to_call_center
  - escalate_emergency
  - escalate_human

# ─────────────────────────────────────────────────────────────────────────────
# Prompt (external Jinja file)
# ─────────────────────────────────────────────────────────────────────────────
prompt: prompt.jinja
